/* AdvancedCamera.css --- Reactコンポーネント「AdvancedCamera」のスタイルシート */
/* BEM (advanced-camera) 命名規則を採用 */

/* 親コンポーネントいっぱいに広がるコンテナ */
.advanced-camera {
  position: relative;
  width: 100%;
  height: 100%;
  background-color: #000;
  display: flex;
  flex-direction: column;
}

/* visibility: hidden で実質的に非表示 */
.advanced-camera__video-source {
  visibility: hidden;
  position: absolute;
  top: 0;
  left: 0;
  width: 1px;
  height: 1px;
  pointer-events: none;
}

/* <canvas>要素 */
.advanced-camera__viewport {
  width: 100%;
  height: 100%;
  display: block;
  touch-action: none; /* ブラウザの標準タッチ操作を無効化 */
}

/* オーバーレイ・メッセージ (初期化中・エラー時など) */
.advanced-camera__overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: white;
  z-index: 10;
  text-align: center;
  padding: 20px;
  box-sizing: border-box;
}

.advanced-camera__overlay-text {
  width: 100%;
  text-align: center;
  margin-bottom: 20px;
  font-size: 1.2rem;
}

advanced-camera__overlay-description {
  font-size: 1rem;
}

/* コントロールパネル */
.advanced-camera__controls {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  padding: 10px 10px calc(10px + env(safe-area-inset-bottom));
  background: transparent;
  z-index: 5;
  transition: opacity 0.3s ease;
  pointer-events: none; /* コンテナ自体のクリックを無効化 */
}

/* 録画中はUIの状態を変える */
.advanced-camera__controls--recording {
  opacity: 0.8;
}

/* ボタン共通スタイル */
.advanced-camera__button {
  width: 64px;
  height: 64px;
  background: rgba(255, 255, 255, 0.2);
  border: none;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  cursor: pointer;
  transition: all 0.2s ease;
  backdrop-filter: blur(4px);
  flex-shrink: 0;
  pointer-events: auto; /* ボタン自体はクリック可能に */
}

@media (hover: hover) { /* hover指定できるPCを想定したスタイル */
  .advanced-camera__button:hover:not(:disabled) {
    color: black;
    background: rgba(255, 255, 255, 0.6);
    transform: scale(1.2);
  }
}
@media (hover: none) { /* hoverが使えないタッチ端末を想定したスタイル */
  .advanced-camera__button:active:not(:disabled) {
    color: black;
    background: rgba(255, 255, 255, 0.6);
    transform: scale(1.2);
  }
}

.advanced-camera__button:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* 録画ボタン */
.advanced-camera__button--record {
  background: rgba(255, 191, 191, 0.8);
  color: black;
  border: 2px solid #aaa; /* 外側のリング */
}

.advanced-camera__button--record.is-recording {
  color: white;
  background: rgba(255, 0, 0, 1);
  animation: pulse 2s infinite;
}

.advanced-camera__button--record.is-recording:hover {
  color: white;
  background: rgba(255, 0, 0, 1);
}

/* ズーム倍率表示 */
.advanced-camera__zoom-display {
position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.5);
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-family: monospace;
  font-size: 0.9rem;
  z-index: 5;
}

/* 録画時間表示 */
.advanced-camera__timer {
position: absolute;
  top: 20px;
  left: 20px;
  background: rgba(255, 0, 0, 0.7);
  color: white;
  padding: 4px 12px;
  border-radius: 12px;
  font-family: monospace;
  font-weight: bold;
  z-index: 5;
}

.advanced-camera__restart-btn {
  margin: 30px;
  padding: 10px 20px;
  background: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 1rem;
}

@keyframes pulse {
  0% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7); }
  70% { box-shadow: 0 0 0 10px rgba(255, 0, 0, 0); }
  100% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0); }
}

/* 写真撮影ボタンのスタイル */
.advanced-camera__button--photo {
  /* 内部にリングを表現するため、外側の背景は透明にする */
  background: transparent; 
  border: 2px solid #aaa; /* 外側のリング */
  position: relative;
  overflow: visible; /* 内部インジケータ表示のため */
}

.advanced-camera__button--photo:active {
  background: rgba(255, 255, 255, 0.5);
}

.advanced-camera__button--photo::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 50px; /* リングの内径 */
  height: 50px;
  border-radius: 50%;
  background: white; /* 白い塗りつぶし */
  transition: all 0.1s ease;
}

/* 押下時のフィードバック */
.advanced-camera__button--photo:active::after {
  transform: translate(-50%, -50%) scale(0.9); /* わずかに縮小 */
}

/* 撮影中に使用する lucide icon の色を黒に上書き */
.advanced-camera__button--photo svg {
    color: black;
    z-index: 2; /* 白い背景の上に表示 */
}

/* マイクボタン */
.advanced-camera__button--microphone {
  color: white;
  background: rgba(0, 0, 0, 0.5);
  border: 2px solid #aaa; /* 外側のリング */
}

/* マイクON時のスタイル */
.advanced-camera__button--mic-on {
}

/* マイクOFF時のスタイル (視覚的な違いを明確にする) */
.advanced-camera__button--mic-off {
  opacity: 0.8;
}

/* QRスキャンボタン */
.advanced-camera__button--scan {
  color: white;
  background: rgba(0, 100, 255, 0.3);
  border: 2px solid #0066ff;
}

/* スキャンON時のスタイル */
.advanced-camera__button--scan-on {
  background: rgba(0, 200, 0, 0.5);
  border: 2px solid #00ff00;
  animation: scan-pulse 2s infinite;
}

@keyframes scan-pulse {
  0% { box-shadow: 0 0 0 0 rgba(0, 255, 0, 0.7); }
  70% { box-shadow: 0 0 0 10px rgba(0, 255, 0, 0); }
  100% { box-shadow: 0 0 0 0 rgba(0, 255, 0, 0); }
}

/* カメラ切り替えボタン (右下端のフローティング配置) */
.advanced-camera__button--switch {
  position: absolute;
  /* コントロールパネルと同じ bottom: 20px よりも少し上に配置するか、
     コントロールパネルの領域外に配置する */
  bottom: 100px; /* コントロールパネルの上部と被らないよう配置 */
  right: 20px;
  z-index: 5;

  /* 他のボタンと同じ基本スタイルを使用 */
  width: 64px; 
  height: 64px; 
  /* デフォルトの advanced-camera__button スタイルを継承 */
  background: rgba(0, 0, 0, 0.5);
  border: 2px solid #aaa; /* 外側のリング */
}

.advanced-camera__button--switch:disabled {
    opacity: 0.3;
}
